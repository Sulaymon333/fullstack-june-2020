{"ast":null,"code":"var _jsxFileName = \"/Users/mostafahazareh/Desktop/fullstack-june-2020/react/coding sessions/session 1/restaurant-app/src/App.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport DisplayRestaurant from \"./components/DisplayRestaurant\";\nimport Navbar from \"./components/Navbar\";\n\nconst App = () => {\n  const [restaurantList, setRestaurantList] = useState({\n    businesses: []\n  });\n  const [search, setSearch] = useState(\"restaurants\");\n  const [favorite, setFavorite] = useState(false);\n  const [isLoading, setisLoading] = useState(false);\n\n  const fetchingData = async () => {\n    setisLoading(true);\n    const url = `https://famua0f1ql.execute-api.eu-central-1.amazonaws.com/dev/restaurants?searchTerm=${search}&location=helsinki`;\n    const response = await axios.get(url); // console.log(\"url is \", url);\n    // console.log(\"response is \", response.data);\n\n    response.data.businesses.forEach(res => Object.assign(res, {\n      favorite: false\n    }));\n    setRestaurantList(response.data);\n    setisLoading(false);\n  };\n\n  useEffect(() => {\n    let restaurantData = localStorage.getItem('restaurantList');\n    restaurantData = JSON.parse(restaurantData);\n    console.log('data from localstorage', restaurantData);\n\n    if (restaurantData !== null) {\n      setRestaurantList(re);\n    }\n\n    fetchingData();\n  }, [search]);\n  const favoriteList = restaurantList.businesses.filter(restaurant => restaurant.favorite === true);\n\n  const handleClick = () => {\n    let sortedRestaurants = restaurantList.businesses.sort((a, b) => {\n      return b.rating - a.rating;\n    });\n    setRestaurantList({\n      businesses: [...sortedRestaurants]\n    });\n    console.log(\"result is \", sortedRestaurants);\n  };\n\n  const searchRestaurants = e => {\n    e.preventDefault();\n    console.log(\"button clicked\");\n    const newSearch = document.getElementById(\"addSearch\");\n\n    if (newSearch.value !== \"\") {\n      console.log(\"data from newSearch is \", newSearch.value);\n      setSearch(newSearch.value);\n    }\n  }; // console.log(restaurantList)\n  // console.log(favorite)\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Main-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    searchRestaurants: searchRestaurants,\n    setFavorite: setFavorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"Loading...\"), restaurantList && /*#__PURE__*/React.createElement(DisplayRestaurant, {\n    restaurantList: favorite ? favoriteList : restaurantList.businesses,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 26\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/mostafahazareh/Desktop/fullstack-june-2020/react/coding sessions/session 1/restaurant-app/src/App.js"],"names":["React","useState","useEffect","axios","DisplayRestaurant","Navbar","App","restaurantList","setRestaurantList","businesses","search","setSearch","favorite","setFavorite","isLoading","setisLoading","fetchingData","url","response","get","data","forEach","res","Object","assign","restaurantData","localStorage","getItem","JSON","parse","console","log","re","favoriteList","filter","restaurant","handleClick","sortedRestaurants","sort","a","b","rating","searchRestaurants","e","preventDefault","newSearch","document","getElementById","value"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nimport \"./App.css\";\n\nimport DisplayRestaurant from \"./components/DisplayRestaurant\";\nimport Navbar from \"./components/Navbar\";\n\nconst App = () => {\n  const [restaurantList, setRestaurantList] = useState({ businesses: [] });\n  const [search, setSearch] = useState(\"restaurants\");\n  const [favorite, setFavorite] = useState(false)\n  const [ isLoading, setisLoading] = useState(false)\n\n  const fetchingData = async () => {\n    setisLoading(true)\n    const url = `https://famua0f1ql.execute-api.eu-central-1.amazonaws.com/dev/restaurants?searchTerm=${search}&location=helsinki`;\n    const response = await axios.get(url);\n    // console.log(\"url is \", url);\n    // console.log(\"response is \", response.data);\n    response.data.businesses.forEach( res => Object.assign(res,{favorite: false}))\n    setRestaurantList(response.data);\n    setisLoading(false)\n  };\n\n  useEffect(() => {\n    let restaurantData = localStorage.getItem('restaurantList')\n    restaurantData = JSON.parse(restaurantData)\n    console.log('data from localstorage',restaurantData)\n    if(restaurantData !== null){\n      setRestaurantList(re)\n    }\n    fetchingData();\n  }, [search]);\n\n  const favoriteList = restaurantList.businesses.filter( restaurant => restaurant.favorite === true)\n\n  const handleClick = () => {\n    let sortedRestaurants = restaurantList.businesses.sort((a, b) => {\n      return b.rating - a.rating;\n    });\n    setRestaurantList({businesses:[...sortedRestaurants]});\n    console.log(\"result is \", sortedRestaurants);\n  };\n\n  const searchRestaurants = (e) => {\n    e.preventDefault();\n    console.log(\"button clicked\");\n\n    const newSearch = document.getElementById(\"addSearch\");\n    if (newSearch.value !== \"\") {\n      console.log(\"data from newSearch is \", newSearch.value);\n      setSearch(newSearch.value);\n    }\n  };\n\n  // console.log(restaurantList)\n  // console.log(favorite)\n\n  return (\n    <div className=\"Main-container\">\n      <Navbar searchRestaurants={searchRestaurants} setFavorite={setFavorite} />\n      {isLoading && <div className=\"loader\">Loading...</div>}\n      {restaurantList && <DisplayRestaurant restaurantList={favorite ? favoriteList : restaurantList.businesses} />}\n    </div>\n  );\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}